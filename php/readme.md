# Написание РНР кода

### Содержимое файлов

1. РНР код должен использовать только теги `<?php ?>` + `<?php ?>` или `<?= ?>`. Использование других
   тегов (`<? ?>`, `<?php= ?>`) запрещено. В конце файла не должно содержаться закрывающего тега `?>`, но должна
   содержаться пустая строка.
2. Код должен быть написан в кодировке UTF-8 (без ВОМ). Если база использует кодировку СР-1251, то следует использовать
   соответствующие функции конвертации кодировки для переменных.
3. Файл должен либо объявлять новые символы (классы, функции, константы) без дополнительных эффектов, либо исполнять
   логику с определёнными эффектами (вывод значений на экран, определение и модификация переменных и объектов). Файл
   никогда не должен делать и то, и другое.

Примеры эффектов: вывод на экран, использование `require` или `include`, подключение к внешним сервисам, модификация
настроек ini, вывод ошибок или исключений, модификация глобальных или статических переменных, чтение или запись файлов,
объявление объектов, и т.п.

Пример файла, в котором одновременно присутствуют объявление и эффекты (то, чего следует избегать):

```php
<?php

// эффект: смена настроек ini

ini_set ("error_reporting", E_ALL);

// эффект: подгрузка файла
include "file.php";

// эффект: вывод на экран
echo "<html>\n";

// объявление функции
function foo()
{
    // содержимое функции
}
```

Пример файла, в котором присутствуют только объявления, без эффектов (то, к чему следует стремиться):

```php

<?php
// объявление функции
function foo()
{
    // содержимое функции
}
// проверка на условие при объявлении не является эффектом
if
(!function_exists("bar")) {
    function bar()
    {
        // содержимое функции
    }
}

```

4. Каждый класс должен содержаться в отдельном файле, с указанием одного пространства имён. Название этого файла должно
   соответствовать названию класса, написанному с учётом стилистики названий файлов (нижний регистр, символ
   подчёркивания разделяет слова).

Пример файла delivery_calc.php:

```php
<?php
namespace Nizamov\Sale;

class DeliveryCalc
{
   // Содержимое класса
}
```

### Общие правила

1. Отступы слева должны делаться четырьмя пробелами, а не символом табуляции.
2. Длина строки не должна превышать 120 символов. По возможности, следует укладываться в 80 символов.
3. На концах строк не должно быть лишних пробелов и символа возврата каретки (\г). Строки должны заканчиваться только
   символом перевода на новую строку (\п).
4. Рекомендуется использовать пустые строки для разделения кода по смысловым блокам.
5. На одной строке должно содержаться не более одного оператора.
6. Ключевые слова РНР (http://php.net/manual/en/reserved.keywords.php) всегда должны быть в нижнем регистре.
7. Константы `true`,`false` и `null` всегда должны быть в нижнем регистре.
8. Вместо ключевых слов `include` и `require` всегда следует использовать `include_опсе` и `require_once`.
9. Отладка никогда не должна выводиться пользователям, только разработчикам.

